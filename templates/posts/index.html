{% extends 'base.html' %}

{% load static %}

{% block title %}Blog{{ block.super }}{% endblock %}

{% block description %}Needs description{% endblock %}

{% block inline_css %}
<style type="text/css">
	.blog-hp-hero-bg {
		background: linear-gradient(135deg, #E75C00c4 0%, #E89000c4 100%), url({% static 'img/DSC_2859.jpg' %});
		background-repeat: no-repeat;
		background-size: cover;
		background-position: center;
		color: #fff;
	}

	.light-gray-arch-bg {
		background-color: #f7f7f7;
	}
</style>
{% endblock %}

{% block script %}
<script>

$(document).ready(function(){

	var postList = [];

	function parsePosts(){
		if (postList == 0){
			$('#featured-post').append('<h3 class="text-center py-5">Currently there aren\'t any posts available.</h3>')
		} else {
			var index = 0;
			$.each(postList, function(key, value){
				var postTitle = value.post_title
				var postPubDate = value.pub_date
				var postContent = value.strip_content
				var postCategory = value.post_category[0].category_name
				var postFeatImg = value.feat_img
				var postThumbImg = value.thumb_img
				var postUrl = value.post_url
				index += 1
				if (index === 1) {
					$('#featured-post').append(
					'<div class="card blog-card my-4"><div class="row no-gutters"><div class="col-md-4 rounded blog-img blog-row" style="background-image: url(' + postThumbImg + ');"></div><div class="col-md-8 d-flex align-items-center"><div class="card-body"><span class="small arch-orange">' + postCategory + '</span><i class="fas fa-circle align-middle mx-2"></i><span class="small text-muted">' + postPubDate + '</span><h5 class="card-title">' + postTitle + '</h5><p class="card-text">' + postContent + '</p><div class="row"><div class="col-6"><a href="' + postUrl + '" class="btn btn-outline-primary btn-block arch-btn-outline-primary" role="button" aria-pressed="true">Read More</a></div></div></div></div></div></div>'
					)
				} else {
					console.log('tester')
				}

			})

		}
	}

	$.ajax({
		url: '/blog/api/list-post/',
		method: 'GET',
		success: function(data){
			postList = data['results']
			parsePosts()
		}
	})
});
	
</script>
{% endblock %}

{% block social_data %}{% endblock %}

{% block schema_data %}{% endblock %}

{% block content %}
<div class="blog-hp-hero-bg">
	<div class="container">
		<div class="row py-5">
			<div class="col-lg-6 col-md-8">
				<h1 class="text-white pt-5">Arch Value Blog &amp; Resources</h1>
				<p class="text-white">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
			</div>
		</div>
		<div class="row">
			<div class="col-12">
				<ul class="list-inline">
						<li class="list-inline-item">All</li>
					{% for category in categories %}
						<li class="list-inline-item">{{ category.category_name }}</li>
					{% endfor %}
				</ul>
			</div>
		</div>
	</div>
</div>
<div class="light-gray-arch-bg">
	<div class="container">
		<div class="row">
			<div id="featured-post" class="col-12">
				
			</div>
		</div>
	</div>
</div>
{% endblock %}